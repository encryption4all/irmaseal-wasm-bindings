## IRMAseal wasm bindings

This package contains automatically generated javascript wasm-bindgen bindings
to call into the IRMAseal rust library from javacript.

## Usage

```javascript
// Before encryption, create a new `MetadataCreateResult` instance:
let res = new Metadata({ type: "...", value: "..." }, public_key);

// now the keys, headers and iv can be retrieved:
const { aes_key, mac_key } = res.keys;

// to get the full byte representation of the header:
const header = res.header;

// to get a json representation of the metadata:
const metadata = res.metadata;
const json = res.metadata.to_json();
```

```javascript
// For decrypion, create a new instance of a `MetadataReader`:
let reader = new MetadataReader();

// Continually feed it chunks till it returns  `done`:
// use `reader.safe_write_size` to make sure
// to not read outside of the metadata in the source.
res = reader.feed(chunk)

// The following getters fail if the reader has not been satisfied yet.
const metadata = res.metadata;
const header = res.header;

// using the metadata and the user secret key, we can then derive decryption keys
const { aes_key, mac_key } = metadata.derive_keys(usk);
```

For more information, see the types generated by this package.

## Building

### Prerequisites

Make sure the latest version of wasm-pack is installed:

```
cargo install --git https://github.com/rustwasm/wasm-pack.git
```

### Building

To build the bindings package, run:

```
wasm-pack build --release -d pkg/ --out-name index --scope e4a --target bundler
```

Note that this includes a scope.

### Publishing

```
wasm-pack publish
```
